# Использование доменов, поддоменов и подкаталогов

Когда вы решили использовать домены, поддомены или подкаталоги для городов, необходимо проделать подготовительную работу.

1. Добавим добавить актуальную ссылку на город в тег base внутри блока head:

```modx
<base href="[[!+cf.current_city.url]]" />
```

2. В качестве плейсхолдера со ссылкой на главную страницу сайта использовать

```modx
[[!+cf.current_city.url]]
```

Теперь можно приступать к настройке самого сайта, хостинг-провайдера и DNS-записей домена.

## Использование подкаталогов

Самый простой вариант работы с компонентом. В данном случае дополнительных настроек хостинга и DNS-записей не требуется. После добавления городов с ключами необходимо включить опцию **Город в подпапках** `cityfields_cityinsubfolder` в системных настройках компонента.

![Опция](https://file.modx.pro/files/7/b/6/7b6886e81f7f5ea0df940651be4995d7.png)

## Использование поддоменов

Начнём с того, что создадим свой список городов на странице компонента, если вы этого ещё не сделали. Ключ — это наш будущий поддомен для города.

[![Список городов](https://file.modx.pro/files/d/3/a/d3a1e98fc34c534855ffd1b4a892c1be.png)](https://file.modx.pro/files/d/3/a/d3a1e98fc34c534855ffd1b4a892c1be.png)

Теперь создадим соответствующие поддомены у вашего регистратора домена и направим по тому же IP-адресу, куда направлен и ваш основной домен.

После чего подключим их к сайту по тому же пути, что и основной сайт. Если вы пользуетесь SSL-сертификатом, необходимо будет перевыпустить его, добавив в него новые поддомены.

[![Список доменов](https://file.modx.pro/files/0/5/0/05005e973324cd3d6daeab6041ff4778.png)](https://file.modx.pro/files/0/5/0/05005e973324cd3d6daeab6041ff4778.png)

Теперь включаем опцию **Город в домене** `cityfields_cityindomain` в системных настройках компонента.

![Опция](https://file.modx.pro/files/9/7/2/972ba2f56c3a2e89ed1ea839b36e387e.png)

## Использование полных доменов

Настройка в данном случае аналогична настройки поддоменов для городов, только в качестве ключа города необходимо указывать полный домен.

[![Список городов](https://file.modx.pro/files/8/b/1/8b18ec03b1ef2863913fd84fbe2c9aca.png)](https://file.modx.pro/files/8/b/1/8b18ec03b1ef2863913fd84fbe2c9aca.png)

## Одновременное использование доменов и подкаталогов

Компонент позволяет использовать для города одновременно и полный домен, и подкаталог. В этом случае настройка идентична использованию полных доменов, но также включается опция **Город в подпапках** `cityfields_cityinsubfolder` в системных настройках компонента.

В качестве ключа города указывается полный домен и подкаталог, при необходимости.

[![Список городов](https://file.modx.pro/files/d/d/1/dd126fc279f9ae9885bcc41f68b4fff7.png)](https://file.modx.pro/files/d/d/1/dd126fc279f9ae9885bcc41f68b4fff7.png)
