# Формирование карты сайта

Если вы используете поддомены или подкаталоги для городов, то появляется задача корректного формирования карты сайта `sitemap.xml`. Для этого необходимо создать страницу в панели управления сайтом со следующими параметрами:

* Шаблон: `пустой`
* Псевдоним: `sitemap`
* Тип содержимого: `XML`
* Содержимое:

``` modx
[[!pdoSitemap?
  &cache=`0`
  &scheme=`-1`
  &tpl=`tpl.Sitemap`
]]
```

![Страница карты сайта](https://file.modx.pro/files/e/1/c/e1c702d8c9c0d8ab4ce2d14926c38d5d.png)

Так как INLINE чанки не умеют обрабатывать модификаторы и условия, то также создадим чанк `tpl.Sitemap` со следующим содержимым:

```modx
<url>
<loc>[[!+cf.current_city.url]]{$url != '/' ? $url : ''}</loc>
<lastmod>[[+date]]</lastmod>
<changefreq>[[+update]]</changefreq>
<priority>[[+priority]]</priority>
</url>
```

Таким образом на каждом поддомене или подкаталоге будет формироваться карта сайта `sitemap.xml`.
